{
    "question": "分析以下成功执行的语句：\n```sql\nmysql> SOURCE /usr/share/mysql-8.0/audit_log_filter_linux_install.sql\n```\n然后，重新连接到 MySQL 并执行多个查询。\n现在检查命令产生的结果 `<datadir>/audit.log` 文件的文本内容：\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<AUDIT>\n  <AUDIT_RECORD>\n    <TIMESTAMP>2019-12-12T04:36:39 UTC</TIMESTAMP>\n    <RECORD_ID>1_2019-12-12T04:36:39</RECORD_ID>\n    <NAME>Audit</NAME>\n    <SERVER_ID>1</SERVER_ID>\n    <VERSION>1</VERSION>\n    <STARTUP_OPTIONS>/usr/sbin/mysqld</STARTUP_OPTIONS>\n    <OS_VERSION>x86_64-Linux</OS_VERSION>\n    <MYSQL_VERSION>8.0.18-commercial</MYSQL_VERSION>\n  </AUDIT_RECORD>\n</AUDIT>\n```\n要使文件包含可见的语句事件，必须执行什么操作？",
    "selections": {
        "A": "必须通过 Performance Schema 读取审计日志语句。",
        "B": "必须将 `audit_log=ON` 添加到 MySQL 配置文件，然后重新启动 MySQL 来记录语句。",
        "C": "您必须等待审计日志缓冲区填充，然后才能刷新到磁盘。",
        "D": "必须使用 `audit_log_filter_set_filter()` 和 `audit_log_filter_set_user()` 函数指定要记录的内容。",
        "E": "必须使用 `audit_log_read()` 和 `audit_log_read_bookmark()` 函数来读取语句事件。"
    },
    "answers": ["D"],
    "summary": "### 选项分析\n- **A. 必须通过 Performance Schema 读取审计日志语句。**\n  错误。Performance Schema 是用于监控 MySQL 性能的工具，与审计日志的配置和记录无关。\n\n- **B. 必须将 `audit_log=ON` 添加到 MySQL 配置文件，然后重新启动 MySQL 来记录语句。**\n  错误。虽然启用审计日志需要在配置文件中设置 `audit_log=ON`，但这只是基础配置，无法直接记录语句事件。\n\n- **C. 您必须等待审计日志缓冲区填充，然后才能刷新到磁盘。**\n  错误。审计日志缓冲区的刷新机制与记录语句事件无关，且题干中未提及缓冲区问题。\n\n- **D. 必须使用 `audit_log_filter_set_filter()` 和 `audit_log_filter_set_user()` 函数指定要记录的内容。**\n  正确。MySQL 审计日志需要通过 `audit_log_filter_set_filter()` 和 `audit_log_filter_set_user()` 函数来配置过滤规则，指定哪些语句和用户需要记录。\n\n- **E. 必须使用 `audit_log_read()` 和 `audit_log_read_bookmark()` 函数来读取语句事件。**\n  错误。这些函数用于读取审计日志内容，而非配置记录语句事件。\n\n### 考点总结\n本题考查 MySQL 审计日志的配置与使用，具体涉及以下知识点：\n1. **审计日志的基础配置**：通过 `audit_log=ON` 启用审计日志。\n2. **语句事件的记录**：需要使用 `audit_log_filter_set_filter()` 和 `audit_log_filter_set_user()` 函数来指定记录的语句和用户。\n3. **审计日志的读取**：使用 `audit_log_read()` 和 `audit_log_read_bookmark()` 函数读取日志内容，但与记录语句事件无关。\n4. **Performance Schema 的作用**：Performance Schema 用于性能监控，与审计日志无关。\n\n通过分析可知，正确答案是 **D**，因为只有通过配置过滤规则才能记录语句事件。",
    "suggestion": "### 应试技巧\n1. **理解审计日志的核心功能**：审计日志用于记录数据库操作，包括语句、用户等信息。掌握其配置和使用方法是关键。\n2. **区分不同函数的作用**：\n   - `audit_log_filter_set_filter()` 和 `audit_log_filter_set_user()`：用于配置审计日志的过滤规则。\n   - `audit_log_read()` 和 `audit_log_read_bookmark()`：用于读取审计日志内容。\n   - `Performance Schema`：用于性能监控，与审计日志无关。\n3. **关注题干细节**：题干中提到的 `audit_log_filter_linux_install.sql` 脚本是启用审计日志的基础，但记录语句事件需要进一步配置。\n\n### 学习建议\n1. **深入学习审计日志配置**：掌握如何通过配置文件和函数启用和配置审计日志。\n2. **熟悉审计日志相关函数**：理解 `audit_log_filter_set_filter()`、`audit_log_filter_set_user()`、`audit_log_read()` 等函数的作用和用法。\n3. **结合实践操作**：在实验环境中实际启用审计日志，并通过配置过滤规则记录语句事件，加深理解。\n4. **复习 Performance Schema 的作用**：虽然本题不涉及，但 Performance Schema 是 MySQL 性能监控的重要工具，建议一并掌握。\n\n通过系统学习和实践操作，可以更好地应对类似题目，掌握 MySQL 审计日志的配置与使用。"
}