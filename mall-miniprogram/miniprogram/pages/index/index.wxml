<view class="container">
  <!-- 搜索栏 -->
  <view class="search-bar" bindtap="goToSearch">
    <van-search 
      placeholder="请输入搜索关键词" 
      disabled="{{true}}"
      shape="round"
      background="#FF5777" 
      custom-class="search-input" 
    />
  </view>
  
  <!-- 轮播图 -->
  <view class="swiper-container">
    <swiper 
      autoplay="{{true}}" 
      interval="3000" 
      duration="500" 
      circular="{{true}}" 
      indicator-dots="{{true}}" 
      indicator-color="rgba(255,255,255,0.6)" 
      indicator-active-color="#FF5777"
      class="banner-swiper"
    >
      <block wx:for="{{banners}}" wx:key="id">
        <swiper-item>
          <image src="{{item.imageUrl}}" class="banner-image" mode="aspectFill" />
        </swiper-item>
      </block>
      <block wx:if="{{loading.banner && !banners.length}}">
        <swiper-item>
          <view class="banner-loading">
            <van-loading color="#FF5777" />
          </view>
        </swiper-item>
      </block>
    </swiper>
  </view>
  
  <!-- 推荐商品 -->
  <view class="section">
    <view class="section-title">推荐商品</view>
    <scroll-view class="recommend-scroll" scroll-x="{{true}}">
      <view class="recommend-list">
        <block wx:for="{{recommendGoods}}" wx:key="id">
          <view class="recommend-item" bindtap="goToGoodsDetail" data-id="{{item.id}}">
            <image src="{{item.primaryImage}}" class="recommend-img" mode="aspectFill" />
            <view class="recommend-info">
              <view class="recommend-name text-ellipsis">{{item.name}}</view>
              <view class="recommend-price price">{{item.price}}</view>
            </view>
          </view>
        </block>
        <block wx:if="{{loading.recommend && !recommendGoods.length}}">
          <view class="recommend-loading">
            <van-loading color="#FF5777" />
          </view>
        </block>
      </view>
    </scroll-view>
  </view>
  
  <!-- 分类列表 -->
  <view class="section">
    <view class="section-title">分类列表</view>
    <view class="category-tabs">
      <scroll-view scroll-x="{{true}}" class="category-scroll">
        <view class="category-list">
          <block wx:for="{{categories}}" wx:key="id">
            <view 
              class="category-item {{currentCategory.id === item.id ? 'active' : ''}}" 
              bindtap="handleCategoryChange" 
              data-id="{{item.id}}"
            >
              {{item.name}}
            </view>
          </block>
        </view>
      </scroll-view>
    </view>
    
    <!-- 分类商品 -->
    <view class="goods-list">
      <block wx:for="{{goodsList}}" wx:key="id">
        <view class="goods-item" bindtap="goToGoodsDetail" data-id="{{item.id}}">
          <image src="{{item.primaryImage}}" class="goods-img" mode="aspectFill" />
          <view class="goods-info">
            <view class="goods-name text-ellipsis-2">{{item.name}}</view>
            <view class="goods-price price">{{item.price}}</view>
            <view class="goods-stock">库存: {{item.stock}}</view>
            <button 
              class="btn btn-primary add-cart" 
              catchtap="addToCart" 
              data-id="{{item.id}}"
            >
              加入购物车
            </button>
          </view>
        </view>
      </block>
      <block wx:if="{{loading.goods && !goodsList.length}}">
        <view class="goods-loading">
          <van-loading color="#FF5777" />
        </view>
      </block>
    </view>
    
    <!-- 底部加载更多 -->
    <view class="loading-more" wx:if="{{loading.goods && goodsList.length}}">
      <van-loading size="24px" color="#FF5777">加载中...</van-loading>
    </view>
    <view class="no-more" wx:if="{{!hasMoreGoods && goodsList.length}}">
      没有更多商品了
    </view>
  </view>
</view> 