<!--index.wxml-->
<navigation-bar title="Weixin" back="{{false}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- 自定义导航栏 -->
    <view class="custom-nav">
      <van-search
        value="{{ searchValue }}"
        placeholder="请输入搜索关键词"
        shape="round"
        background="#ffffff"
        bind:focus="onSearchFocus"
      />
    </view>
    
    <!-- 轮播图区域 -->
    <view class="banner">
      <swiper indicator-dots autoplay circular interval="3000" duration="500">
        <block wx:for="{{ banners }}" wx:key="id">
          <swiper-item>
            <image src="{{ item.image_url }}" class="banner-image" mode="aspectFill" bindtap="onBannerTap" data-item="{{ item }}"></image>
          </swiper-item>
        </block>
      </swiper>
    </view>
    
    <!-- 推荐商品 -->
    <view class="recommend-section">
      <view class="section-title">推荐商品</view>
      <scroll-view class="recommend-scroll" scroll-x>
        <view class="recommend-list">
          <block wx:for="{{ recommendGoods }}" wx:key="id">
            <view class="recommend-item" bindtap="onGoodsTap" data-id="{{ item.id }}">
              <image src="{{ item.primary_pic_url }}" class="recommend-image" mode="aspectFill"></image>
              <view class="recommend-name text-ellipsis">{{ item.name }}</view>
              <view class="recommend-price price">¥{{ item.retail_price }}</view>
            </view>
          </block>
        </view>
      </scroll-view>
    </view>
    
    <!-- 分类列表 -->
    <view class="category-section">
      <view class="section-title">分类列表</view>
      <view class="category-tabs">
        <block wx:for="{{ categories }}" wx:key="id">
          <view class="category-tab {{ currentCategory === item.id ? 'active' : '' }}" bindtap="onCategoryTap" data-id="{{ item.id }}">
            {{ item.name }}
          </view>
        </block>
      </view>
      
      <!-- 分类商品 -->
      <view class="goods-grid">
        <block wx:for="{{ categoryGoods }}" wx:key="id">
          <view class="goods-item" bindtap="onGoodsTap" data-id="{{ item.id }}">
            <image src="{{ item.primary_pic_url }}" class="goods-image" mode="aspectFill"></image>
            <view class="goods-name text-ellipsis">{{ item.name }}</view>
            <view class="goods-price price">¥{{ item.retail_price }}</view>
            <view class="goods-stock">库存: {{ item.goods_number }}</view>
            <view class="add-cart" catchtap="onAddCart" data-id="{{ item.id }}">
              <text>+加入购物车</text>
            </view>
          </view>
        </block>
      </view>
    </view>
  </view>
</scroll-view>
