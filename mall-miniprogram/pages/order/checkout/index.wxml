<!--pages/order/checkout/index.wxml-->
<view class="container">
  <view class="header">
    <view class="title">确认订单</view>
  </view>

  <!-- 收货地址 -->
  <view class="address-section" bindtap="chooseAddress">
    <view class="address-content" wx:if="{{selectedAddress}}">
      <view class="address-info">
        <view class="address-name-phone">
          <text class="address-name">{{selectedAddress.name}}</text>
          <text class="address-phone">{{selectedAddress.phone}}</text>
        </view>
        <view class="address-detail">{{selectedAddress.province}}{{selectedAddress.city}}{{selectedAddress.district}}{{selectedAddress.detail}}</view>
      </view>
      <view class="address-arrow">
        <text class="arrow">></text>
      </view>
    </view>
    <view class="address-empty" wx:else>
      <text class="address-empty-text">请选择收货地址</text>
      <text class="arrow">></text>
    </view>
  </view>

  <!-- 商品列表 -->
  <view class="goods-section">
    <view class="section-title">商品信息</view>
    <view class="goods-list">
      <view class="goods-item" wx:for="{{cartItems}}" wx:key="id">
        <image class="goods-image" src="{{item.goods_info.image}}" mode="aspectFill"></image>
        <view class="goods-info">
          <view class="goods-name">{{item.goods_info.name}}</view>
          <view class="goods-specs" wx:if="{{item.goods_info.specs}}">{{item.goods_info.specs}}</view>
          <view class="goods-price-quantity">
            <view class="goods-price">¥{{item.goods_info.price}}</view>
            <view class="goods-quantity">x{{item.quantity}}</view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 配送方式 -->
  <view class="delivery-section">
    <view class="section-title">配送方式</view>
    <view class="delivery-content">
      <text class="delivery-label">普通快递</text>
      <text class="delivery-value">¥{{deliveryFee}}</text>
    </view>
  </view>

  <!-- 订单备注 -->
  <view class="remark-section">
    <view class="section-title">订单备注</view>
    <view class="remark-content">
      <input class="remark-input" placeholder="选填：填写订单备注信息" value="{{remark}}" bindinput="handleRemarkInput" />
    </view>
  </view>

  <!-- 金额信息 -->
  <view class="amount-section">
    <view class="amount-item">
      <text class="amount-label">商品金额</text>
      <text class="amount-value">¥{{goodsAmount}}</text>
    </view>
    <view class="amount-item">
      <text class="amount-label">运费</text>
      <text class="amount-value">¥{{deliveryFee}}</text>
    </view>
  </view>

  <!-- 底部支付栏 -->
  <view class="footer">
    <view class="total-amount">
      <text>合计：</text>
      <text class="total-price">¥{{totalAmount}}</text>
    </view>
    <button class="submit-btn" bindtap="submitOrder" disabled="{{!selectedAddress}}">提交订单</button>
  </view>
</view>