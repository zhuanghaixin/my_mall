<!--pages/user/index.wxml-->
<view class="container">
  <navigation-bar title="个人中心"></navigation-bar>
  
  <!-- 用户信息区域 -->
  <view class="user-info-section">
    <view class="user-info">
      <image class="avatar" src="{{userInfo.avatar || '/assets/images/default-avatar.png'}}"></image>
      <view class="user-detail">
        <view class="nickname">{{userInfo.nickname || '未登录'}}</view>
        <view class="account" wx:if="{{userInfo.id}}">账号: {{userInfo.phone || 'NA'}}</view>
        <view class="login-btn" wx:else bindtap="goLogin">点击登录</view>
      </view>
    </view>
    <view class="logout-btn" wx:if="{{hasUserInfo}}" bindtap="handleLogout">退出登录</view>
  </view>
  
  <!-- 我的订单区域 -->
  <view class="order-section">
    <view class="section-header">
      <text class="title">我的订单</text>
      <view class="more" bindtap="goAllOrders">查看全部 ></view>
    </view>
    <view class="order-types">
      <view class="order-item" bindtap="goOrderList" data-type="0">
        <view class="icon-wrapper">
          <image class="icon" src="/assets/images/order-unpaid.png"></image>
          <view class="badge" wx:if="{{orderCounts.unpaid > 0}}">{{orderCounts.unpaid}}</view>
        </view>
        <text>待付款</text>
      </view>
      <view class="order-item" bindtap="goOrderList" data-type="1">
        <view class="icon-wrapper">
          <image class="icon" src="/assets/images/order-unshipped.png"></image>
          <view class="badge" wx:if="{{orderCounts.unshipped > 0}}">{{orderCounts.unshipped}}</view>
        </view>
        <text>待发货</text>
      </view>
      <view class="order-item" bindtap="goOrderList" data-type="2">
        <view class="icon-wrapper">
          <image class="icon" src="/assets/images/order-delivered.png"></image>
          <view class="badge" wx:if="{{orderCounts.delivered > 0}}">{{orderCounts.delivered}}</view>
        </view>
        <text>待收货</text>
      </view>
      <view class="order-item" bindtap="goOrderList" data-type="3">
        <view class="icon-wrapper">
          <image class="icon" src="/assets/images/order-completed.png"></image>
          <view class="badge" wx:if="{{orderCounts.completed > 0}}">{{orderCounts.completed}}</view>
        </view>
        <text>待评价</text>
      </view>
    </view>
  </view>
  
  <!-- 我的服务区域 -->
  <view class="service-section">
    <view class="section-header">
      <text class="title">我的服务</text>
    </view>
    <view class="service-grid">
      <view class="service-item" bindtap="goAddress">
        <image class="service-icon" src="/assets/images/icon-address.png"></image>
        <text>收货地址</text>
      </view>
      <view class="service-item" bindtap="goCoupon">
        <image class="service-icon" src="/assets/images/icon-coupon.png"></image>
        <text>优惠券</text>
      </view>
      <view class="service-item" bindtap="goSetting">
        <image class="service-icon" src="/assets/images/icon-setting.png"></image>
        <text>设置</text>
      </view>
      <view class="service-item" bindtap="goFavorite">
        <image class="service-icon" src="/assets/images/icon-favorite.png"></image>
        <text>收藏夹</text>
      </view>
      <view class="service-item" bindtap="goHistory">
        <image class="service-icon" src="/assets/images/icon-history.png"></image>
        <text>浏览历史</text>
      </view>
      <view class="service-item" bindtap="goAbout">
        <image class="service-icon" src="/assets/images/icon-about.png"></image>
        <text>关于我们</text>
      </view>
    </view>
  </view>
</view>