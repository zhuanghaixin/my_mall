# 商城小程序项目需求

本项目包含三个子项目，分别是：

## 1. 商城小程序前端（微信小程序原生）
- **技术栈**：
  - 微信小程序原生开发
  - 使用微信小程序原生框架
  - 使用微信小程序vant ui 组件库和微信小程序原生组件
  - 使用微信小程序原生API

## 2. 商城小程序的后台管理系统
- **技术栈**：
  - Vue 3 + TypeScript
  - Element Plus UI框架
  - Vue Router路由管理
  - Pinia状态管理
  - Axios HTTP请求
  - Vite构建工具
  - ESLint代码规范
  - Prettier代码格式化
  - Node.js + Express后端服务
  - MySQL数据库
  - Session/Cookie身份认证
 
## 3. 前端的后端API服务
- **技术栈**：
  - Node.js + Express

# 功能需求

## 一、商城小程序前端（微信小程序）页面及功能

### 1. 首页
- 1.1 顶部搜索栏
- 1.2 轮播图广告位
- 1.3 推荐商品列表（两列）
  - 1.3.1 推荐商品卡片，显示商品名称，图片，价格
  - 1.3.2 点击商品进入商品详情页面
  - 1.3.3 推荐商品卡片以水平滚动
- 1.4 分类列表
  - 1.4.1 顶部不同分类
  - 1.4.2 点击分类切换不同的分类列表
  - 1.4.3 分类列表呈两列展示，显示商品名称，图片，价格，库存，加入购物车按钮
  - 1.4.4 商品卡片点击进入商品详情页面
- 1.5 底部TabBar导航(首页，分类，购物车，我的)

### 2. 分类页
- 2.1 左侧一级分类列表 显示分类名称
- 2.2 右侧二级/三级分类 分类商品列表 
- 2.3 点击不同分类，切换不同分类商品列表
- 2.4 底部TabBar导航(首页，分类，购物车，我的)

### 3. 商品列表页
- 3.1 商品卡片展示
- 3.2 上拉加载更多
- 3.3 下拉刷新

### 4. 商品详情页
- 4.1 商品轮播图
- 4.2 商品基本信息（名称、价格、销量）
- 4.3 商品详情介绍（图文）
- 4.4 加入购物车按钮
- 4.5 立即购买按钮
- 4.6 底部TabBar导航(首页，分类，购物车，我的)

### 5. 购物车页面
- 5.1 商品列表展示
- 5.2 商品选择功能
- 5.3 数量调整功能
- 5.4 商品删除功能
- 5.5 价格计算
- 5.6 结算按钮
- 5.7 空购物车提示

### 6. 订单确认页
- 6.1 收货地址管理
- 6.2 商品清单确认
- 6.3 订单备注
- 6.4 价格明细（商品总价、运费、优惠等）
- 6.5 支付方式选择
- 6.6 提交订单按钮

### 7. 支付页面
- 7.1 订单金额展示
- 7.2 微信支付接口调用
- 7.3 支付结果展示
- 7.4 支付成功/失败处理

### 8. 订单列表页
- 8.1 订单状态分类（全部、待付款、待发货、待收货、待评价）
- 8.2 订单信息展示
- 8.3 订单状态对应操作按钮
- 8.4 订单搜索功能
- 8.5 上拉加载更多

### 9. 订单详情页
- 9.1 订单状态展示
- 9.2 收货信息
- 9.3 商品清单
- 9.4 价格明细
- 9.5 订单编号及时间
- 9.6 物流信息查询
- 9.7 订单操作按钮（付款、确认收货、申请退款等）

### 10. 个人中心页
- 10.1 用户基本信息展示
- 10.2 我的订单入口（待付款、待发货、待收货、待评价）
- 10.3 收货地址管理

### 11. 用户登录/注册页
- 11.1 微信授权登录
- 11.2 手机号绑定
- 11.3 用户协议

### 12. 收货地址管理页
- 12.1 地址列表展示
- 12.2 新增地址
- 12.3 编辑地址
- 12.4 删除地址
- 12.5 设置默认地址

### 13. 搜索页面
- 13.1 搜索输入框
- 13.2 热门搜索词
- 13.3 搜索历史
- 13.4 搜索结果展示
- 13.5 搜索建议

## 二、商城小程序后台管理系统功能需求

### 1. 商品管理
#### 1.1 商品列表页
- 1.1.1 商品搜索（支持名称、分类、状态搜索）
- 1.1.2 商品列表展示（商品名称、图片、价格、库存、状态、创建时间）
- 1.1.3 商品状态管理（上架/下架）
- 1.1.4 商品删除功能
- 1.1.5 批量操作功能（批量上架/下架/删除）
- 1.1.6 分页功能

#### 1.2 商品编辑/新增页
- 1.2.1 基本信息编辑
  - 商品名称
  - 商品分类选择
  - 商品价格
  - 商品库存
  - 商品状态
  - 商品图片上传（支持多图）
- 1.2.2 商品详情编辑
  - 商品描述
  - 商品规格设置
  - 商品参数设置
- 1.2.3 保存/取消功能

### 2. 分类管理
#### 2.1 分类列表页
- 2.1.1 分类树形结构展示
- 2.1.2 分类搜索功能
- 2.1.3 分类状态管理
- 2.1.4 分类删除功能

#### 2.2 分类编辑/新增页
- 2.2.1 分类名称设置
- 2.2.2 父级分类选择
- 2.2.3 分类图标上传
- 2.2.4 分类排序设置
- 2.2.5 保存/取消功能

### 3. 订单管理
#### 3.1 订单列表页
- 3.1.1 订单搜索（订单号、用户、状态、时间范围）
- 3.1.2 订单列表展示（订单号、用户、金额、状态、时间）
- 3.1.3 订单状态管理（待付款、待发货、待收货、已完成）
- 3.1.4 订单导出功能
- 3.1.5 分页功能

#### 3.2 订单详情页
- 3.2.1 订单基本信息展示
- 3.2.2 收货信息展示
- 3.2.3 商品清单展示
- 3.2.4 订单操作（发货、退款等）
- 3.2.5 订单备注管理

### 4. 用户管理
#### 4.1 用户列表页
- 4.1.1 用户搜索（昵称、手机号）
- 4.1.2 用户列表展示（头像、昵称、手机号、注册时间）
- 4.1.3 用户状态管理
- 4.1.4 分页功能

#### 4.2 用户详情页
- 4.2.1 用户基本信息展示
- 4.2.2 用户订单记录
- 4.2.3 用户收货地址管理

### 5. 轮播图管理
#### 5.1 轮播图列表页
- 5.1.1 轮播图列表展示
- 5.1.2 轮播图排序管理
- 5.1.3 轮播图状态管理

#### 5.2 轮播图编辑/新增页
- 5.2.1 轮播图图片上传
- 5.2.2 轮播图链接设置
- 5.2.3 轮播图排序设置
- 5.2.4 保存/取消功能

### 6. 数据统计
#### 6.1 销售统计
- 6.1.1 销售额统计（日、周、月）
- 6.1.2 订单量统计
- 6.1.3 商品销量排行
- 6.1.4 数据导出功能

#### 6.2 用户统计
- 6.2.1 用户增长统计
- 6.2.2 用户活跃度统计
- 6.2.3 用户地域分布

### 7. 系统设置
#### 7.1 基础设置
- 7.1.1 运费设置
- 7.1.2 支付方式设置
- 7.1.3 系统参数设置

#### 7.2 消息通知
- 7.2.1 订单通知设置
- 7.2.2 系统通知设置

## 三、商城小程序后端API规划设计

### A. 小程序端API（用户端使用）

#### A1. 用户模块
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 微信登录 | POST /api/user/wxlogin | 通过微信code获取用户openid并登录 |
| 手机号绑定 | POST /api/user/bindphone | 绑定用户手机号 |
| 获取用户信息 | GET /api/user/info | 获取当前登录用户信息 |
| 更新用户信息 | PUT /api/user/info | 更新用户基本信息 |

#### A2. 收货地址
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 获取地址列表 | GET /api/address/list | 获取用户的收货地址列表 |
| 添加收货地址 | POST /api/address | 添加新的收货地址 |
| 更新收货地址 | PUT /api/address/:id | 更新指定的收货地址 |
| 删除收货地址 | DELETE /api/address/:id | 删除指定的收货地址 |
| 设置默认地址 | PUT /api/address/:id/default | 设置指定地址为默认地址 |

#### A3. 购物车
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 获取购物车列表 | GET /api/cart/list | 获取用户购物车商品列表 |
| 添加购物车 | POST /api/cart | 添加商品到购物车 |
| 更新购物车商品 | PUT /api/cart/:id | 更新购物车中商品的数量 |
| 删除购物车商品 | DELETE /api/cart/:id | 从购物车中删除指定商品 |
| 清空购物车 | DELETE /api/cart/clear | 清空用户购物车 |
| 选择/取消选择商品 | PUT /api/cart/:id/select | 选择或取消选择购物车中的商品 |
| 全选/取消全选 | PUT /api/cart/selectall | 全选或取消全选购物车中的商品 |

#### A4. 订单与支付
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 创建订单 | POST /api/order | 创建新订单 |
| 获取订单列表 | GET /api/order/list | 获取用户订单列表，支持状态筛选 |
| 获取订单详情 | GET /api/order/:id | 获取指定订单的详细信息 |
| 取消订单 | PUT /api/order/:id/cancel | 取消指定订单 |
| 确认收货 | PUT /api/order/:id/confirm | 确认收到指定订单的商品 |
| 删除订单 | DELETE /api/order/:id | 删除指定订单 |
| 获取支付参数 | POST /api/pay/wxpay | 获取微信支付所需参数 |
| 查询支付状态 | GET /api/pay/status/:orderId | 查询订单支付状态 |
| 获取物流信息 | GET /api/order/:id/logistics | 获取指定订单的物流信息 |

#### A5. 搜索
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 搜索商品 | GET /api/search | 搜索商品，支持关键词搜索 |
| 获取热门搜索词 | GET /api/search/hot | 获取热门搜索关键词 |
| 获取搜索历史 | GET /api/search/history | 获取用户搜索历史 |
| 清除搜索历史 | DELETE /api/search/history | 清除用户搜索历史 |

#### A6. 首页
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 获取轮播图 | GET /api/home/banner | 获取首页轮播图 |
| 获取首页数据 | GET /api/home/data | 获取首页所有数据（轮播图、推荐商品、分类等） |

### B. 管理端API（后台管理系统使用）

#### B1. 商品管理
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 获取商品列表 | GET /api/admin/goods/list | 获取商品列表，支持搜索和分页 |
| 添加商品 | POST /api/admin/goods | 添加新商品 |
| 更新商品 | PUT /api/admin/goods/:id | 更新指定商品信息 |
| 删除商品 | DELETE /api/admin/goods/:id | 删除指定商品 |
| 上架/下架商品 | PUT /api/admin/goods/:id/status | 更改商品上架/下架状态 |
| 批量操作商品 | POST /api/admin/goods/batch | 批量操作商品(上架/下架/删除) |

#### B2. 分类管理
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 获取分类列表 | GET /api/admin/category/list | 获取分类列表，包含树形结构 |
| 添加分类 | POST /api/admin/category | 添加新分类 |
| 更新分类 | PUT /api/admin/category/:id | 更新指定分类信息 |
| 删除分类 | DELETE /api/admin/category/:id | 删除指定分类 |
| 更新分类状态 | PUT /api/admin/category/:id/status | 更新分类状态 |

#### B3. 订单管理
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 获取订单列表 | GET /api/admin/order/list | 获取订单列表，支持搜索和分页 |
| 获取订单详情 | GET /api/admin/order/:id | 获取指定订单详情 |
| 更新订单状态 | PUT /api/admin/order/:id/status | 更新订单状态(发货等) |
| 订单备注 | PUT /api/admin/order/:id/remark | 添加/修改订单备注 |
| 导出订单 | GET /api/admin/order/export | 导出订单数据 |

#### B4. 用户管理
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 获取用户列表 | GET /api/admin/user/list | 获取用户列表，支持搜索和分页 |
| 获取用户详情 | GET /api/admin/user/:id | 获取指定用户详情 |
| 更新用户状态 | PUT /api/admin/user/:id/status | 启用/禁用用户 |
| 获取用户订单 | GET /api/admin/user/:id/orders | 获取指定用户的订单列表 |

#### B5. 轮播图管理
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 获取轮播图列表 | GET /api/admin/banner/list | 获取轮播图列表 |
| 添加轮播图 | POST /api/admin/banner | 添加新轮播图 |
| 更新轮播图 | PUT /api/admin/banner/:id | 更新指定轮播图 |
| 删除轮播图 | DELETE /api/admin/banner/:id | 删除指定轮播图 |
| 更新轮播图状态 | PUT /api/admin/banner/:id/status | 更新轮播图状态 |
| 更新轮播图排序 | PUT /api/admin/banner/sort | 更新轮播图排序 |

#### B6. 数据统计
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 获取销售统计 | GET /api/admin/stats/sales | 获取销售额统计数据 |
| 获取订单统计 | GET /api/admin/stats/orders | 获取订单量统计数据 |
| 获取商品销量排行 | GET /api/admin/stats/goods/rank | 获取商品销量排行 |
| 获取用户增长统计 | GET /api/admin/stats/users/growth | 获取用户增长统计数据 |
| 获取用户活跃度 | GET /api/admin/stats/users/active | 获取用户活跃度统计 |
| 获取用户地域分布 | GET /api/admin/stats/users/region | 获取用户地域分布统计 |

#### B7. 系统设置
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 获取系统设置 | GET /api/admin/settings | 获取系统设置信息 |
| 更新系统设置 | PUT /api/admin/settings | 更新系统设置信息 |
| 获取运费设置 | GET /api/admin/settings/shipping | 获取运费设置 |
| 更新运费设置 | PUT /api/admin/settings/shipping | 更新运费设置 |
| 获取支付设置 | GET /api/admin/settings/payment | 获取支付方式设置 |
| 更新支付设置 | PUT /api/admin/settings/payment | 更新支付方式设置 |
| 获取通知设置 | GET /api/admin/settings/notification | 获取通知设置 |
| 更新通知设置 | PUT /api/admin/settings/notification | 更新通知设置 |

#### B8. 管理员账户
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 管理员登录 | POST /api/admin/login | 管理员账号密码登录 |
| 获取管理员信息 | GET /api/admin/info | 获取当前登录的管理员信息 |
| 修改密码 | PUT /api/admin/password | 修改管理员密码 |
| 退出登录 | POST /api/admin/logout | 管理员退出登录 |

### C. 共用API（小程序端和管理端共同使用）

#### C1. 商品与分类查询
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 获取商品列表 | GET /api/goods/list | 获取商品列表，支持分页和筛选 |
| 获取商品详情 | GET /api/goods/:id | 获取指定商品的详细信息 |
| 获取推荐商品 | GET /api/goods/recommend | 获取推荐商品列表 |
| 获取热销商品 | GET /api/goods/hot | 获取热销商品列表 |
| 获取分类列表 | GET /api/category/list | 获取所有商品分类 |
| 获取分类详情 | GET /api/category/:id | 获取指定分类的详情 |
| 获取分类商品 | GET /api/category/:id/goods | 获取指定分类下的商品 |

#### C2. 文件上传
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 上传图片 | POST /api/upload/image | 上传图片文件 |
| 上传多张图片 | POST /api/upload/images | 批量上传多张图片 |

#### C3. 公共服务
| API名称 | API路径 | 功能描述 |
| --- | --- | --- |
| 支付回调 | POST /api/pay/notify | 微信支付结果通知接口 |





 